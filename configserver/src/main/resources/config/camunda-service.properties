spring.application.name=camunda-service
server.port=5050

# Database Configuration for Camunda
spring.datasource.url=jdbc:mysql://localhost:3306/camundadb
spring.datasource.username=springstudent
spring.datasource.password=springstudent
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# Camunda Database Configuration
camunda.bpm.database.type=mysql
camunda.bpm.database.schema-update=true
camunda.bpm.history-level=full

# Eureka Client (optional, keep consistent)
eureka.client.service-url.defaultZone=http://localhost:8761/eureka
eureka.instance.prefer-ip-address=true

# Kafka / Spring Cloud Stream
spring.cloud.stream.kafka.binder.brokers=localhost:9092
# Explicitly define which function to use
spring.cloud.function.definition=orderCreated
spring.cloud.stream.bindings.orderCreated-in-0.destination=orders.created
spring.cloud.stream.bindings.orderCreated-in-0.group=camunda-service
spring.cloud.stream.bindings.orderCreated-in-0.content-type=application/json
# Error handling for consumer
spring.cloud.stream.bindings.orderCreated-in-0.consumer.max-attempts=3
spring.cloud.stream.kafka.bindings.orderCreated-in-0.consumer.enable-dlq=true
spring.cloud.stream.kafka.bindings.orderCreated-in-0.consumer.dlq-name=orders.created.dlq
# Consumer configuration
spring.cloud.stream.kafka.bindings.orderCreated-in-0.consumer.auto-offset-reset=earliest
spring.cloud.stream.kafka.bindings.orderCreated-in-0.consumer.enable-auto-commit=false

# Kafka Admin Client Timeout Configuration
spring.cloud.stream.kafka.binder.admin.timeout=60000
spring.cloud.stream.kafka.binder.configuration.request.timeout.ms=60000
spring.cloud.stream.kafka.binder.configuration.metadata.max.age.ms=30000

# Camunda webapp (if enabled)
camunda.bpm.admin-user.id=admin
camunda.bpm.admin-user.password=admin
camunda.bpm.filter.create=All

# Logging configuration for debugging Kafka consumer
logging.level.org.springframework.cloud.stream=DEBUG
logging.level.org.springframework.kafka=INFO
logging.level.org.apache.kafka=WARN

# Zipkin Tracing Configuration
management.tracing.sampling.probability=1.0
management.zipkin.tracing.endpoint=http://localhost:9411/api/v2/spans
# Explicitly set service name for tracing (ensures proper dependency visualization)
management.tracing.service.name=camunda-service
spring.application.name=camunda-service



